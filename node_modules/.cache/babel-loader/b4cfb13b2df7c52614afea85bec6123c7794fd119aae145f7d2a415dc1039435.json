{"ast":null,"code":"var _jsxFileName = \"D:\\\\OneDrive\\\\Desktop\\\\prj\\\\intern_ass\\\\reachinbox-assignment\\\\src\\\\components\\\\OneBox.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { jwtDecode } from 'jwt-decode';\nimport { Routes, Route, useParams } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction OneBox() {\n  _s();\n  const [emailThreads, setEmailThreads] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [userName, setUserName] = useState('');\n  useEffect(() => {\n    // Get token from URL or localStorage\n    const tokenFromUrl = new URLSearchParams(window.location.search).get('token');\n    const token = tokenFromUrl || localStorage.getItem('token');\n    if (token) {\n      localStorage.setItem('token', token);\n\n      // Decode user name\n      try {\n        const decoded = jwt_decode(token);\n        setUserName(decoded.name || decoded.fullName || 'User');\n      } catch (err) {\n        console.error('Error decoding token:', err);\n      }\n      axios.get('https://hiring.reachinbox.xyz/api/v1/onebox/list', {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }).then(response => {\n        if (response.data && response.data.data) {\n          setEmailThreads(response.data.data);\n        } else {\n          setError('No threads available.');\n        }\n        setLoading(false);\n      }).catch(err => {\n        console.error('Error fetching email threads:', err);\n        setError('Failed to fetch email threads.');\n        setLoading(false);\n      });\n    } else {\n      setError('User not logged in.');\n      setLoading(false);\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      userName: userName\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this), loading ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading email threads...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }, this) : error ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Routes, {\n      children: [/*#__PURE__*/_jsxDEV(Route, {\n        path: \"/onebox\",\n        element: /*#__PURE__*/_jsxDEV(EmailThreads, {\n          threads: emailThreads\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 42\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/onebox/thread/:id\",\n        element: /*#__PURE__*/_jsxDEV(EmailThreadDetail, {\n          emailThreads: emailThreads\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 53\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/onebox/reply/:id\",\n        element: /*#__PURE__*/_jsxDEV(ReplyEmail, {\n          emailThreads: emailThreads\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 52\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this);\n}\n\n// ðŸŸ¦ Header Component\n_s(OneBox, \"JhctR/G8zffOeAkXmBZd8BMGZsg=\");\n_c = OneBox;\nfunction Header({\n  userName\n}) {\n  const greeting = getGreeting();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [greeting, \", \", userName]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 5\n  }, this);\n}\n_c2 = Header;\nfunction getGreeting() {\n  const hour = new Date().getHours();\n  if (hour < 12) return \"Good Morning\";\n  if (hour < 17) return \"Good Afternoon\";\n  return \"Good Evening\";\n}\n\n// ðŸ“© Other Components (unchanged) â€” EmailThreads, EmailThreadDetail, ReplyEmail\n// (Use your previously defined EmailThreads, EmailThreadDetail, and ReplyEmail components)\n\nexport default OneBox;\nvar _c, _c2;\n$RefreshReg$(_c, \"OneBox\");\n$RefreshReg$(_c2, \"Header\");","map":{"version":3,"names":["React","useState","useEffect","axios","jwtDecode","Routes","Route","useParams","jsxDEV","_jsxDEV","OneBox","_s","emailThreads","setEmailThreads","loading","setLoading","error","setError","userName","setUserName","tokenFromUrl","URLSearchParams","window","location","search","get","token","localStorage","getItem","setItem","decoded","jwt_decode","name","fullName","err","console","headers","Authorization","then","response","data","catch","children","Header","fileName","_jsxFileName","lineNumber","columnNumber","path","element","EmailThreads","threads","EmailThreadDetail","ReplyEmail","_c","greeting","getGreeting","_c2","hour","Date","getHours","$RefreshReg$"],"sources":["D:/OneDrive/Desktop/prj/intern_ass/reachinbox-assignment/src/components/OneBox.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport {jwtDecode} from 'jwt-decode';\r\nimport { Routes, Route, useParams } from 'react-router-dom';\r\n\r\nfunction OneBox() {\r\n  const [emailThreads, setEmailThreads] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [userName, setUserName] = useState('');\r\n\r\n  useEffect(() => {\r\n    // Get token from URL or localStorage\r\n    const tokenFromUrl = new URLSearchParams(window.location.search).get('token');\r\n    const token = tokenFromUrl || localStorage.getItem('token');\r\n\r\n    if (token) {\r\n      localStorage.setItem('token', token);\r\n\r\n      // Decode user name\r\n      try {\r\n        const decoded = jwt_decode(token);\r\n        setUserName(decoded.name || decoded.fullName || 'User');\r\n      } catch (err) {\r\n        console.error('Error decoding token:', err);\r\n      }\r\n\r\n      axios.get('https://hiring.reachinbox.xyz/api/v1/onebox/list', {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      })\r\n        .then(response => {\r\n          if (response.data && response.data.data) {\r\n            setEmailThreads(response.data.data);\r\n          } else {\r\n            setError('No threads available.');\r\n          }\r\n          setLoading(false);\r\n        })\r\n        .catch(err => {\r\n          console.error('Error fetching email threads:', err);\r\n          setError('Failed to fetch email threads.');\r\n          setLoading(false);\r\n        });\r\n    } else {\r\n      setError('User not logged in.');\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <Header userName={userName} />\r\n      {loading ? (\r\n        <p>Loading email threads...</p>\r\n      ) : error ? (\r\n        <p>{error}</p>\r\n      ) : (\r\n        <Routes>\r\n          <Route path=\"/onebox\" element={<EmailThreads threads={emailThreads} />} />\r\n          <Route path=\"/onebox/thread/:id\" element={<EmailThreadDetail emailThreads={emailThreads} />} />\r\n          <Route path=\"/onebox/reply/:id\" element={<ReplyEmail emailThreads={emailThreads} />} />\r\n        </Routes>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n// ðŸŸ¦ Header Component\r\nfunction Header({ userName }) {\r\n  const greeting = getGreeting();\r\n  return (\r\n    <div>\r\n      <h2>{greeting}, {userName}</h2>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction getGreeting() {\r\n  const hour = new Date().getHours();\r\n  if (hour < 12) return \"Good Morning\";\r\n  if (hour < 17) return \"Good Afternoon\";\r\n  return \"Good Evening\";\r\n}\r\n\r\n// ðŸ“© Other Components (unchanged) â€” EmailThreads, EmailThreadDetail, ReplyEmail\r\n// (Use your previously defined EmailThreads, EmailThreadDetail, and ReplyEmail components)\r\n\r\nexport default OneBox;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}